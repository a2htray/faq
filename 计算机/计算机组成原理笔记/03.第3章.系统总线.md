# 系统总线

## 3.1 总线的基本概念

* 连接方式
    * 分散连接：各个部件之间使用单独的连线(早期的计算机大多数用分散连接方式)
        * I/O与存储器交换信息 -> 运算器停止运算 -> 影响CPU的工作效率
    * 总线连接：将各部件连到一组公共信息传输线上
        * 总线是连接多个部件的信息传输线，是各部件共享的传输介质
        * 在某一时刻，只允许有一个部件向总线发送信息，多个部件可以同时从总线上接收相同的信息
        * 总线是由许多传输线或通路组成
        * 每条线可一位一位地传输二进制代码，一串二进制代码可在一段时间内逐一传输完成
        * 若干条传输线可以同时传输若干位二进制代码

> CPU为中心的双总线结构

<div align="center">

![](images/面向CPU的双总线结构框图.png)

</div>

* M总线(存储总线)：连接CPU和主存
* I/O总线：建立CPU与各I/O设备信息传输的通道
    * 各I/O设备通过I/O接口挂到I/O总线上
* 优点：便于增删设备
* 缺点：I/O设备与主存进行信息交换仍然需要用到CPU，影响CPU的工作效率

> 单总线结构框图

<div align="center">

![](images/单总线结构框图.png)

</div>

* 原则上不影响CPU工作
* 只有一组总线，需要总线判优逻辑，让部件按优先级占用总线，影响整机工作效率

> 以存储器训中心的双总线结构

<div align="center">
![](images/以存储器训中心的双总线结构框图.png)
</div>

* 在CPU和主存间连接一条总线，称存储总线，只提供CPU与主存的信息交换

## 3.2 总线的分类

* 按**数据传输方式**
    * 并行传输总线
    * 串行传输总线
* 按**传输数据宽度**，有8位、16位、32位、64位等
* 按**连接部件不同**
    * **片内总线**：芯片内部的总线
    * **系统总线**：CPU、主存、I/O设备各大部件的信息传输线，又称板级总线或板间总线
        * 系统总线按传输信息的不同
            * 数据总线
            * 地址总线
            * 信息总线
    * **通信总线**
        * 用于计算机系统之间或计算机系统与其他系统之间的通信
        * 按传输方式分类：
            * 串行传输：适用于远距离传输
            * 并行传输：适用于近距离传输
**数据总线**

|序号|理解|
|:---|:--|
|1|**传输各个部件的数据信息，是双向传输线**|
|2|**位数与存储字长、机器字长有关**|
|3|**数据总线的位数称为数据总线宽度**|

> 如果数据总线的位数为8位，指令长为16位，则需要两次访问主存

**地址总线**

|序号|理解|
|:---|:--|
|1|**主要用来指出数据总线中源数据或目标数据的存储单元地址或I/O设备的地址**|
|2|地址线的位数与存储单元的个数有关，单向输出|

> 若有20根地址线，则有2^20个存储单元

**控制总线**

|序号|理解|
|:---|:--|
|1|**用来发出各种控制信息的传输线**|
|2|**如何使不同的部件不同的时刻占用总线**|
|3|**对任一控制线而言，传输是单向的，但对控制总线来说，也可认为是双向的**|
|4|控制总线还起到监视各部件状态的作用|
|5|对CPU而言，控制信号既有输出，又有输入|

<div align="center">
![](images/常见的控制信息列表.png)
</div>

## 3.3 总线特性及性能指标

**总线特性**

* 机械特性：总线在机械连接方式上的一些性能
* 电气特性：总线的每一根传输线上信号的<font color="red">传递方向</font>和<font color="red">有效电平范围</font>
    * 地址总线和数据总线都定义高电平为`1`，低电平为`0`
* 功能特性：总线中每根控制线的功能
    * 地址总线用来指出地址码
    * 数据总线用来传输数据
    * 控制总线用来发出控制信号
* 时间特性：总线中任一根线在什么时候有效

**总线性能指标**

* 总线宽度：通常指<font color="red">**数据总线**</font>的宽度
* 总线带宽：总线的数据传输速率，单元时间内总线传输的数据的位数
* 时钟同步/时钟异步：总线上的数据与时钟同步的总线称为同步总线，与时钟异步的总线称为异步总线
* 总线复用：一条信号线上**分时**传送两种信号
* 信号线数：三种总线的总和
* 总线控制方式
* 其他：负载能力、电源电压、总线宽度能否扩展

**总线标准**

* 系统与各模块之间、模块与模块之间的互连的标准界面
* 总线标准设计的接口视为通用接口
* 目前流行的总线标准：
    * ISA总线：
    * .etc
